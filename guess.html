<!DOCTYPE html>
<html>
	<head>
		<title>七十三号馆 - 方方乐</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
		<link type="text/css" rel="stylesheet" href="./css/iconfont.css" />
		<link type="text/css" rel="stylesheet" href="./css/comm.css" />
		<link type="text/css" rel="stylesheet" href="./css/main.css" />
		<link type="text/css" rel="stylesheet" href="./css/guess.css" />
	</head>
	<body>

		<!-- 菜单 -->
		<div class="menu" >
			<a href="./index.html" class="menu-btn iconfont icon-menu"></a>
			<div class="menu-are">
				<a href="./index.html" ><i class="iconfont icon-user"></i><span>个人中心</span></a>
				<a href="./change.html" ><i class="iconfont icon-score"></i><span>兑换</span></a>
				<p></p>
				<a href="./guess.html" ><i class="iconfont icon-menu-guess"></i><span>竞猜</span></a>
				<a href="#" ><i class="iconfont icon-menu-match"></i><span>比赛</span></a>
				<a href="#" ><i class="iconfont icon-menu-invest"></i><span>投资</span></a>
			</div>
		</div>

		<h1 class="comm-title" id="aa">Welcome to "Guess"</h1>
		
		<!-- 主体部分 -->
		<div class="main">
			<div class="label">
				<span><i class="iconfont icon-reward"></i>基础分+100</span>
				<span><i class="iconfont icon-reward"></i>上限+30</span>
				<span><i class="iconfont icon-reward"></i>可多选</span>
				<div class="comm-clear"></div>
			</div>

			<div class="depict" id="bb">
				<i class="iconfont icon-time"></i><span>每天开放时间为 10:00 - 22:00</span>
			</div>
			
			<div class="user">
				<i class="iconfont icon-user"></i>
				<input id="d" placeholder="请输入你的账号" />
				<span id="msg" class="comm-tip"><i></i><em>提示信息</em></span>
			</div>

			<div class="score">
				<span class="score-number" id="info" >
					<i class="iconfont icon-score"></i>
					<em id="score">0</em>分
				</span>
				<span class="score-mode" style="display:inline-block;">
					<!-- <a class="score-item" id="changeModeTemplate" style="display:none;" href="javascript:;" title="添加兑换方式" ><i class="iconfont"></i><span>-</span></a> -->
					<a class="score-item" href="javascript:;" title="小提示：&#10;1、选择一项按着左键不放可以持续添加，按着右键不放持续减少；&#10;2、双击一项可以清零；&#10;3、可以自定义每项的昵称；" ><i class="iconfont"></i><span>!</span></a>
				</span>
			</div>

			<div class="select" id="select">
				<a sid="1" href="javascript:;"><i>1</i><em>0</em><span>0</span></a>
				<a sid="2" href="javascript:;"><i>2</i><em>0</em><span>0</span></a>
				<a sid="3" href="javascript:;"><i>3</i><em>0</em><span>0</span></a>
				<a sid="4" href="javascript:;"><i>4</i><em>0</em><span>0</span></a>
				<a sid="5" href="javascript:;"><i>5</i><em>0</em><span>0</span></a>
				<a sid="6" href="javascript:;"><i>6</i><em>0</em><span>0</span></a>
				<a sid="7" href="javascript:;"><i>7</i><em>0</em><span>0</span></a>
				<a sid="8" href="javascript:;"><i>8</i><em>0</em><span>30</span></a>
				<a sid="9" href="javascript:;"><i>9</i><em>0</em><span>0</span></a>
				<!-- <a sid="0" href="javascript:;"><i>0</i><em>0</em></a> -->
			</div>
		</div>
	
		<!-- 分割 -->
		<div class="comm-gap"></div>

		<script src="./js/jquery-1.11.0.min.js" ></script>
		<script type="text/javascript" src="./js/game.comm.js" ></script>
		<script type="text/javascript" src="./js/game.user.js" ></script>
		<script type="text/javascript" src="./js/game.guess.js" ></script>
		<script type="text/javascript">

			var my = new User();	// 初始用户功能

			var go = new Guess();	// 初始用户功能


			// 初始化用户界面及参数
			my.init(function(data){
				my.setTip(data.msg);
				if ( data.status ) {
					$('#d').val(data.user.name);
				}

				// 初始化界面及参数
				go.init();
			});



			// 选择
			var loop = null,
				value = {
					selected: 0,
					number: 0
				};
			$('#select a').click(function(){
				// go.getSelect($(this).attr('sid'), function(data){
				// 	if ( data.status ) {
				// 		go.setOption(data.res);
				// 		if ( data.status == 1 ) {
				// 			my.setUserScore(-1);
				// 		}
				// 	}
				// });
			}).mouseout(function(){
				if ( parseInt($(this).find('span').html()) > 0 ) {
					$(this).addClass('act');
					$(this).find('span').show();
				}
			}).mousedown(function(){
				var el = $(this).find('span'),
					already = parseInt(el.html());

				value.selected = $(this).attr('sid');
				value.number = 1;

				// go.setAppointOption(value.selected, value.number);

				// 长按效果
				function total () {
					if ( value.number + already < 30 ) {
						value.number += 1;
						el.html(already + value.number);
						loop = setTimeout(function(){
							total();
						}, 100);
					}
				}
				loop = setTimeout(function(){ total(); }, 1000);
			}).mouseup(function(){
				clearTimeout(loop);
				console.log(value);
				go.getSelect(value, function(data){
					if ( data.status ) {
						go.setOption(data.res);
						if ( data.status == 1 ) {
							my.setUserScore(-1);
						}
					}
				});
				value = {};
			});

			// 选择
			// $('#select a i').click(function(){
			// 	console.log(111);

			// 	return false;
			// });

			// 快速登录
			$('#d').change(function(){
				var value = $(this).val();
				if ( value == '' ) {
					my.setTip('无效的名称');
					$(this).val(user.name);
				} else {
					my.getUserByName(value, function(data){
						my.setTip(data.msg);
					});
				}
				$('.score-edit').hide();
				$('.score-item').removeClass('act');
			});


		</script>
	</body>
</html>
